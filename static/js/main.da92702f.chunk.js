(this["webpackJsonpmidi-trainer"]=this["webpackJsonpmidi-trainer"]||[]).push([[0],{15:function(e,t,n){e.exports={app:"App_app__PQN_E",wakeLocked:"App_wakeLocked__1R_PW",middleRow:"App_middleRow__sVF2U",main:"App_main__26IeJ",status:"App_status__3rE2Z",keyboard:"App_keyboard__3n2bg"}},46:function(e,t,n){e.exports={panel:"Panel_panel__3YsaG"}},50:function(e,t,n){e.exports=n(60)},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(38),c=n.n(i),l=n(39),o=n(26),s=n.n(o),u=n(24),d=n(61),p=n(73),f=n(23),m=n(63),h=n(62),y=n(18),b=n(41),E=n(64),O=n(65),v=n(35),g=n(66),j=n(67),k=Object(d.a)((function(){return navigator.requestMIDIAccess()})).pipe(Object(h.a)((function(e){return Object(p.a)(Object(f.a)(e.inputs.values()),Object(m.a)(e,"statechange").pipe(Object(y.a)((function(e){return e.port})),Object(b.a)((function(e){return"input"===e.type&&"connected"===e.state})))).pipe(Object(E.a)((function(e){return e.id})),Object(y.a)((function(t){return{name:t.name,connected$:Object(m.a)(e,"statechange").pipe(Object(b.a)((function(e){return e.port.id===t.id})),Object(y.a)((function(e){return"connected"===e.port.state})),Object(O.a)(!0),Object(v.a)(),Object(g.a)()),messages$:x(t)}})))})),Object(j.a)()),x=function(e){return Object(m.a)(e,"midimessage").pipe(Object(j.a)())},w={get:function(){return 1+(15&this.event.data[0])}},N={get:function(){return 127&this.event.data[1]}},P={get:function(){return 127&this.event.data[2]}},S=function(e){var t=e.displayName,n=e.properties,a=e.matcher,r=Symbol(t);return{type:r,matches:a,create:function(e){return Object.create(function(e,t,n){return Object.assign(Object.create(null,e),{type:n,toString:function(){var n=this;return"".concat(t," MIDI message (").concat(Object.keys(e).map((function(e){return"".concat(e,": ").concat(n[e])})).join(", "),")")}})}(n,t,r),{event:{value:e,writable:!1}})}}},_=S({displayName:"Note Off",properties:{channel:w,key:N,velocity:P},matcher:function(e){return 128===(240&e.data[0])}}),C=S({displayName:"Note On",properties:{channel:w,key:N,velocity:P},matcher:function(e){return 144===(240&e.data[0])}}),G=S({displayName:"Unknown",properties:{status:{get:function(){return this.event.data[0]}},data1:{get:function(){return this.event.data[1]}},data2:{get:function(){return this.event.data[2]}}},matcher:function(){return!0}}),A=S({displayName:"Control Change",properties:{channel:w,controller:{get:function(){return 127&this.event.data[1]}},value:{get:function(){return 127&this.event.data[2]}}},matcher:function(e){return 176===(240&e.data[0])}}),W=S({displayName:"Program Change",properties:{channel:w,patch:{get:function(){return 127&this.event.data[1]}}},matcher:function(e){return 192===(240&e.data[0])}}),M=S({displayName:"Pitch Bend Change",properties:{channel:w,value:{get:function(){return 127&this.event.data[1]|(127&this.event.data[2])<<7}}},matcher:function(e){return 224===(240&e.data[0])}}),R=[_,C,A,W,M,G],$=n(68),I=n(22),B=function(){return function(e){return e.pipe(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(b.a)((function(e){return t.includes(e.type)}))}(C.type,_.type),Object($.a)((function(e,t){return(t.type===C.type&&t.velocity?e.add(t.key):e.delete(t.key)).sort()}),Object(I.b)()))}},K=n(42),U=n(69),L=n(40),z=n(70),T=n(72),D=n(71),F=n(43),X=n.n(F),H=function(e){return Object(y.a)((function(t){return{type:e,value:t}}))},J=function(e){return function(t){return t.pipe(Object(b.a)((function(t){return t.type===e})),Object(y.a)((function(e){return e.value})))}},Y=n(44),q=n.n(Y),Q=n(45),V=n.n(Q),Z=["C","D\u266d","D","E\u266d","E","F","F\u266f","G","A\u266d","A","B\u266d","B"],ee=[[function(e){return"".concat(e,"m9 (A)")},[3,7,10,14]],[function(e){return"".concat(e,"m9 (B)")},[10,14,15,19]],[function(e){return"".concat(e,"maj9 (A)")},[4,7,11,14]],[function(e){return"".concat(e,"maj9 (B)")},[11,14,16,19]],[function(e){return"".concat(e,"13 (A)")},[4,9,10,14]],[function(e){return"".concat(e,"13 (B)")},[10,14,16,21]]],te=function(e,t){return t.map((function(t){return e+t}))},ne=function(e){return e.map((function(t){return t-e.first()}))},ae={EXERCISE:Symbol("EXERCISE"),RESULT:Symbol("RESULT")},re=new X.a,ie=function(){var e=new K.a(!1);e.subscribe((function(e){e?re.enable():re.disable()}));var t=k.pipe(Object(L.a)((function(e){return e.connected$.pipe(Object(y.a)((function(t){return{input:e,connected:t}})))})),Object($.a)((function(e,t){var n=t.input;return t.connected?e.add(n.name):e.delete(n.name)}),Object(I.b)()),Object(y.a)((function(e){return e.toArray()}))),n=k.pipe(Object(L.a)((function(e){return e.messages$})),Object(j.a)()).pipe(Object(y.a)((function(e){return R.find((function(t){return t.matches(e)})).create(e)}))),a=n.pipe(B()),r=Object(d.a)((function(){return Object(U.a)(function(){var e=q()(0,11),t=V()(ee),n=Object(u.a)(t,2),a=n[0],r=n[1],i=Object(I.a)(r).sort(),c=te(e,i);return{displayName:a(Z[e]),getResult:function(e){return e.pipe(B(),Object(L.a)((function(e){return e.size?c.some((function(t,n){return t%12===e.first()%12&&ne(c.slice(n)).isSuperset(ne(e))}))?c.size===e.size?[!0]:[]:[!1]:[]})),Object(T.a)())}}}())})).pipe(Object(z.a)((function(e){return Object(p.a)(e.pipe(H(ae.EXERCISE)),e.pipe(Object(h.a)((function(e){return e.getResult(n)})),Object(T.a)(),H(ae.RESULT)))})),Object(D.a)(),Object(j.a)());return{allMidiInputNames$:t,keyboardKeyState$:a,exercise$:r.pipe(J(ae.EXERCISE)),solutions$:r.pipe(J(ae.RESULT)),onToggleWakeLock:function(){return(t=e).pipe(Object(T.a)()).subscribe((function(e){return t.next(!e)}));var t},wakeLockActive$:Object(f.a)(e)}},ce=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(e){var t=e.subscribe(i);return function(){return t.unsubscribe()}}}),[e]),r},le=n(15),oe=n.n(le),se=Object(a.createContext)(null),ue=n(46),de=n.n(ue),pe=function(e){var t=e.children,n=e.className;return r.a.createElement("div",{className:s()(de.a.panel,n)},t)},fe=function(e){var t=e.className,n=Object(a.useContext)(se),i=ce(n.exercise$),c=ce(n.solutions$);return r.a.createElement(pe,{className:t},r.a.createElement("svg",{viewBox:"0 0 160 45",preserveAspectRatio:"xMidYMid meet",onClick:n.onToggleWakeLock},r.a.createElement("svg",{x:"6%",y:"6%",width:"88%",height:"88%"},r.a.createElement("text",{x:"50%",y:"50%",dominantBaseline:"central",textAnchor:"middle",style:{fontSize:25}},null===i||void 0===i?void 0:i.displayName),null!==c&&r.a.createElement("rect",{x:"0",y:"95%",width:"100%",height:"5%",fill:c?"green":"red"}))))},me=n(47),he=n.n(me),ye=n(48),be=n.n(ye),Ee=[0,5.414,9.0444307,15.837,18.0888614,27.1332921,31.859,36.1777228,42.282,45.2221535,52.705,54.2665842],Oe=function(e){var t=e.lowestKey,n=void 0===t?21:t,a=e.highestKey,i=void 0===a?108:a,c=e.keyState,l=e.x,o=e.y,s=e.width,u=e.height;return r.a.createElement("svg",{version:"1.1",x:l,y:o,width:s,height:u,viewBox:ke(n,i),preserveAspectRatio:"xMidYMin meet"},r.a.createElement("defs",{id:"defs2"},r.a.createElement("linearGradient",{id:"linearGradient3981"},r.a.createElement("stop",{id:"stop3977",style:{stopColor:"#f2f2f2",stopOpacity:"1"},offset:"0"}),r.a.createElement("stop",{id:"stop3979",style:{stopColor:"#cccccc",stopOpacity:"1"},offset:"1"})),r.a.createElement("linearGradient",{id:"linearGradient4915",gradientUnits:"userSpaceOnUse",x1:"107.723",x2:"107.723",y1:"131.52364",y2:"129.08444",xlinkHref:"#linearGradient3981"}),r.a.createElement("clipPath",{id:"clipPath3812"},r.a.createElement("rect",{height:"36.348648",id:"rect3814",style:{display:"inline",opacity:"0.17105264",strokeWidth:"0.26458332"},width:"5.57514",x:"107.723",y:"125.41296"})),r.a.createElement("clipPath",{id:"clipPath3973"},r.a.createElement("rect",{height:"56.66114",id:"rect3975",style:{display:"inline",fill:"#808000",strokeWidth:"0.26458332"},width:"9.0444307",x:"102.62053",y:"125.41296"})),r.a.createElement("g",{id:"whiteKey",transform:"translate(-102.62054,-125.41296)"},r.a.createElement("rect",{height:"56.66114",id:"rect3912-3-8",style:{display:"inline",fill:"#1a1a1a",strokeWidth:"0.26458332"},width:"9.0444307",x:"102.62054",y:"125.41296"}),r.a.createElement("rect",{height:"56.472153",id:"rect3912",style:{display:"inline",fill:"#666666",strokeWidth:"0.26075235"},width:"8.8138103",x:"102.73585",y:"125.41296"}),r.a.createElement("rect",{height:"58.599155",id:"rect3912-2",style:{display:"inline",fill:"url(#linearGradient4915)",fillOpacity:"1",strokeWidth:"0.26452145"},width:"8.7103424",clipPath:"url(#clipPath3973)",rx:"0.2",ry:"0.2",transform:"matrix(0.96598043,0,0,0.99499097,3.6446156,0.62819669)",x:"102.78758",y:"123.2748"})),r.a.createElement("rect",{height:"56.66114",id:"whiteKeyPressMask",style:{display:"inline",fill:"green",mixBlendMode:"hard-light",strokeWidth:"0.26458332"},width:"9.0444307",x:"0",y:"0"}),r.a.createElement("linearGradient",{id:"linearGradient3883"},r.a.createElement("stop",{id:"stop3879",style:{stopColor:"#000000",stopOpacity:"1"},offset:"0"}),r.a.createElement("stop",{id:"stop3881",style:{stopColor:"#1a1a1a",stopOpacity:"1"},offset:"1"})),r.a.createElement("linearGradient",{id:"linearGradient3837"},r.a.createElement("stop",{id:"stop3833",style:{stopColor:"#7d7d7d",stopOpacity:"1"},offset:"0"}),r.a.createElement("stop",{id:"stop3835",style:{stopColor:"#b2b2b2",stopOpacity:"1"},offset:"1"})),r.a.createElement("linearGradient",{id:"linearGradient5265",gradientUnits:"userSpaceOnUse",x1:"110.46354",x2:"110.46354",y1:"145.41296",y2:"153.55803",xlinkHref:"#linearGradient3837"}),r.a.createElement("linearGradient",{id:"linearGradient5267",gradientUnits:"userSpaceOnUse",x1:"110.3957",x2:"113.298",y1:"148.06406",y2:"148.33133",xlinkHref:"#linearGradient3883"}),r.a.createElement("clipPath",{id:"clipPath3812"},r.a.createElement("rect",{height:"36.348648",id:"rect3814",style:{display:"inline",opacity:"0.17105264",strokeWidth:"0.26458332"},width:"5.57514",x:"107.723",y:"125.41296"})),r.a.createElement("clipPath",{id:"clipPath3973"},r.a.createElement("rect",{height:"56.66114",id:"rect3975",style:{display:"inline",fill:"#808000",strokeWidth:"0.26458332"},width:"9.0444307",x:"102.62053",y:"125.41296"})),r.a.createElement("g",{id:"blackKey",transform:"matrix(0.99993528,0,0,1,-107.71603,-125.41296)"},r.a.createElement("rect",{height:"36.348648",id:"rect5255",style:{display:"inline",opacity:"1",fill:"#4d4d4d",fillOpacity:"1",strokeWidth:"0.26458332"},width:"5.57514",x:"107.71603",y:"125.41296"}),r.a.createElement("rect",{height:"35.657352",id:"rect5257",style:{fill:"url(#linearGradient5265)",fillOpacity:"1",strokeWidth:"0.23320046"},width:"4.0383401",clipPath:"url(#clipPath3812)",rx:"1.5",ry:"1.5",transform:"matrix(0.99992069,0,0,1,0.0087649,0)",x:"108.49162",y:"123.00336"}),r.a.createElement("path",{id:"path5259",style:{strokeWidth:"0.26458332"},d:"m 112.96463,160.73864 c 0.10641,0.33021 0.19199,1.02296 0.19199,1.02296 -1.6,0 -1.79647,3.5e-4 -2.64612,4e-4 -0.84965,-5e-5 -1.04612,-4e-4 -2.64612,-4e-4 0,0 0.0856,-0.69275 0.19199,-1.02296 0.1363,-0.42296 0.22321,-0.9238 0.5654,-1.20731 0.49755,-0.4122 1.33085,-0.49564 1.88873,-0.50274 0.55788,0.007 1.39118,0.0905 1.88873,0.50274 0.34219,0.28351 0.4291,0.78435 0.5654,1.20731 z"}),r.a.createElement("path",{id:"path5261",style:{fill:"url(#linearGradient5267)",fillOpacity:"1",strokeWidth:"0.05778855"},d:"m 107.723,125.41296 h 0.49315 c 0,0 0.0205,31.37403 0,32.46519 -0.0205,1.09117 -0.49315,3.88346 -0.49315,3.88346 z m 5.575,0 h -0.49315 c 0,0 -0.0205,31.37403 0,32.46519 0.0205,1.09117 0.49315,3.88346 0.49315,3.88346 z"})),r.a.createElement("rect",{height:"36.348648",id:"blackKeyPressMask",style:{display:"inline",opacity:"1",fill:"green",mixBlendMode:"hard-light",fillOpacity:"1",strokeWidth:"0.26458332"},width:"5.57514"})),be()(he()(n,i+1),ge).map((function(e){return r.a.createElement(ve,{key:e,keyNumber:e,isPressed:null===c||void 0===c?void 0:c.has(e)})})))},ve=function(e){var t=e.keyNumber,n=e.isPressed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("use",{href:ge(t)?"#blackKey":"#whiteKey",x:je(t)}),n&&r.a.createElement("use",{href:ge(t)?"#blackKeyPressMask":"#whiteKeyPressMask",x:je(t)}))},ge=function(e){return[1,3,6,8,10].includes(e%12)},je=function(e){return Math.floor(e/12)*(7*9.0444307)+Ee[e%12]},ke=function(e,t){var n=je(e),a=je(t)-je(e)+(ge(t)?5.575:9.0444307);return"".concat(n," ").concat(0," ").concat(a," ").concat(56.66114)},xe=function(e){var t=e.className,n=Object(a.useContext)(se),i=ce(n.keyboardKeyState$);return r.a.createElement(pe,{className:t},r.a.createElement(Oe,{keyState:i}))},we=function(e){var t=e.className,n=Object(a.useContext)(se),i=ce(n.allMidiInputNames$);return r.a.createElement(pe,{className:t},r.a.createElement("div",null,"Connected MIDI input(s): ",(null===i||void 0===i?void 0:i.length)?i.join(", "):r.a.createElement("i",null,"none")))},Ne=function(){var e=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=ie();r(e)}),[]),n}(),t=ce(null===e||void 0===e?void 0:e.wakeLockActive$);return e&&r.a.createElement(se.Provider,{value:e},r.a.createElement("div",{className:s()(oe.a.app,Object(l.a)({},oe.a.wakeLocked,t))},r.a.createElement(we,{className:oe.a.status}),r.a.createElement("div",{className:oe.a.middleRow},r.a.createElement(fe,{className:oe.a.main})),r.a.createElement(xe,{className:oe.a.keyboard})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.da92702f.chunk.js.map